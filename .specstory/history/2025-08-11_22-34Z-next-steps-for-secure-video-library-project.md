<!-- Generated by SpecStory -->

# Next steps for secure video library project (2025-08-11 22:34Z)

_**User**_


taskmaster get task

---

_**Assistant**_

I'll quickly check if Taskmaster is initialized and if any tasks or next-task notes exist so I can show you the current task context or guide setup. I'll load the active tag and tasks.json to show the current task context and the next actionable task. Here’s the current Taskmaster context and the next actionable work I recommend based on your task list.

Checklist
- Load current tasks and tag context: Done (active tag: master)
- Identify in-progress items: Done
- Determine next actionable task by priority/deps: Done
- Present details and suggested next steps: Done

## in-progress you can continue
- 12.8 End-to-End CRUD and Data Revalidation Testing
  - Status: in-progress
  - Notes: Admin auth and UI are working; proceed with the scripted CRUD verification across admin table/calendar and public schedule once routing/API findings are validated.

## next high-priority task ready to start
- ID: 10
- Title: Secure Video Library and Streaming (ST-104)
- Status: todo
- Priority: high
- Dependencies: [9] Membership Subscription System — done
- Goal: Build a members-only video library with secure playback (Mux/Vimeo), tokenized access, and a responsive UI.

What success looks like
- Only authenticated, subscribed members can view library and play videos.
- Direct video URLs fail without a valid signed token.
- Playback verified across devices; adaptive streaming works.

Suggested breakdown (quick plan)
- Choose provider and SDK (Mux recommended for signed playback URLs).
- Prisma: add Video model (id, title, slug, assetId/playbackId, category, duration, visibility).
- API: POST /api/video/token or /api/video/access to return short-lived playback token after membership check.
- Frontend:
  - Library grid page with filters (category/search).
  - Video detail page with embedded player (Plyr or Mux Player).
  - Session/membership gating (reuse getActiveUserSubscription).
- Tests:
  - Unit: gating logic, token issuance.
  - Integration: API returns 401/403 appropriately, happy path returns playable token.
- Ops: add Mux/Vimeo env vars; minimal docs in docs/video/README.md.

What’s next
- If you want, I can expand Task 10 into concrete subtasks and start stubbing the schema + API and a basic library page.

---

_**User**_

Actually we need to finish off a few polish items for task 12. Currently it is all working very well and we want to be aware that the whole set of processes here is tricky and we don't want to break anything so we will be cautious with our editing and check as we go so that we can revert changes if needed but here is a list:

Outstanding Improvements for Task 12 Completion


1. Authentication UX Improvements
Auto-focus email field on sign-in page load
Add password visibility toggle (show/hide password)
Replace GitHub OAuth with Facebook, Twitter, Instagram (keep Google)
2. Calendar Interaction Enhancements
When clicking cancelled classes: Replace "Keep/Cancel" dialog with "Restore Class" and "Go Back" options
This makes more sense for already-cancelled events
3. Data Sorting
Sort upcoming instances by date/time in chronological order
Currently they may not be in the most logical sequence
4. Multi-Day Event Support
For Workshops and Retreats in the create dialog:
Allow adding multiple calendar dates
Automatically set as non-recurring

---

_**Assistant**_

I'll scan the codebase to locate the sign-in form, admin calendar, upcoming instances logic, and the create class modal so I can implement each polish item precisely without breaking existing flows. Gathering the relevant admin components to implement calendar, sorting, and create-dialog changes. I'll search for "upcoming instances" and related rendering to implement chronological sorting where the list is created. [object Object]

---

_**User**_

@agent Continue: "Continue to iterate?"

---

_**Assistant**_

I'll implement the auth UX tweaks, global instance sorting, a restore flow for cancelled calendar events, and multi-day workshop/retreat creation in one patch, then verify files compile. 
```

```

```

```

```

```

```

```

```

```

```

```

```

```

```

```

```

```
I'll make small code edits to fix remaining lint issues and align provider configuration, then run a quick lint check to verify we're clean. 
```

```

```

```

```

```

```

```

```

```

```

```

```

```

```

```

```

```

```

```

```

```

```

```
[object Object]

---

_**User**_

@agent Continue: "Continue to iterate?"

---

_**Assistant**_



---

